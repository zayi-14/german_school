{% extends 'courses/base.html' %}
{% load static %}

{% block title %}Fluss Deutsch ¬∑ Home{% endblock %}

{% block content %}

<!-- HERO -->
<section class="relative hero-height rounded-lg overflow-hidden shadow-lg">
  <img src="{% static 'courses/images/berlin-bg.png' %}" alt="Berlin"
       class="absolute inset-0 w-full h-full object-cover brightness-75">
  <div class="absolute inset-0 bg-gradient-to-r from-slate-900/60 to-slate-900/40"></div>

  <div class="relative z-10 max-w-4xl mx-auto py-20 px-6 text-center text-white">
    <img src="{% static 'courses/images/german_logo_1.png' %}"
         alt="logo"
         class="mx-auto h-32 w-32 rounded-full object-cover mb-6 shadow-lg">

    <h1 class="text-4xl md:text-5xl font-extrabold leading-tight mb-4">Fluss Deutsch</h1>

    <p class="max-w-2xl mx-auto text-lg md:text-xl text-slate-100/90 mb-8">
      Speak German fluently ‚Äî your pathway to success with structured CEFR courses, live classes, and certified tutors.
    </p>

    <!-- dynamic levels -->
    <div class="flex flex-wrap justify-center gap-3">
      {% if levels %}
        {% for level in levels %}
          <a href="{% url 'courses:courses' %}?level={{ level.0 }}"
             class="px-4 py-2 rounded-lg border border-white/30 bg-white/10 hover:bg-white/20 text-white text-sm backdrop-blur-sm">
            {{ level.1 }}
          </a>
        {% endfor %}
      {% else %}
        <a href="{% url 'courses:courses' %}?level=A1" class="px-4 py-2 rounded-lg bg-white/10 border border-white/30 hover:bg-white/20">Beginner A1</a>
        <a href="{% url 'courses:courses' %}?level=A2" class="px-4 py-2 rounded-lg bg-white/10 border border-white/30 hover:bg-white/20">Elementary A2</a>
        <a href="{% url 'courses:courses' %}?level=B1" class="px-4 py-2 rounded-lg bg-white/10 border border-white/30 hover:bg-white/20">Intermediate B1</a>
        <a href="{% url 'courses:courses' %}?level=B2" class="px-4 py-2 rounded-lg bg-white/10 border border-white/30 hover:bg-white/20">Upper Intermediate B2</a>
      {% endif %}
    </div>
  </div>
</section>

<!-- HOW IT WORKS -->
<section class="py-20 bg-secondary">
  <div class="max-w-6xl mx-auto px-4">
    <div class="text-center mb-12">
      <h2 class="text-3xl md:text-4xl font-bold mb-3">Your Path to German Fluency</h2>
      <p class="text-slate-600 max-w-2xl mx-auto">
        Clear steps, modern learning methods, and structured guidance ‚Äî designed for your growth.
      </p>
    </div>

    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      <div class="bg-white rounded-xl p-6 shadow hover:shadow-md transition">
        <div class="w-14 h-14 rounded-full bg-indigo-50 text-indigo-600 flex items-center justify-center text-2xl mb-4">üìò</div>
        <h3 class="font-semibold mb-2 text-lg">Choose Your Course</h3>
        <p class="text-sm text-slate-600">Select your level and the course format that fits your goals.</p>
      </div>

      <div class="bg-white rounded-xl p-6 shadow hover:shadow-md transition">
        <div class="w-14 h-14 rounded-full bg-teal-50 text-teal-600 flex items-center justify-center text-2xl mb-4">‚úîÔ∏è</div>
        <h3 class="font-semibold mb-2 text-lg">Register Easily</h3>
        <p class="text-sm text-slate-600">Simple registration with flexible payment options.</p>
      </div>

      <div class="bg-white rounded-xl p-6 shadow hover:shadow-md transition">
        <div class="w-14 h-14 rounded-full bg-amber-50 text-amber-600 flex items-center justify-center text-2xl mb-4">üèÜ</div>
        <h3 class="font-semibold mb-2 text-lg">Master German</h3>
        <p class="text-sm text-slate-600">Practice regularly and prepare for exams like Goethe/TELC.</p>
      </div>
    </div>
  </div>
</section>

<!-- FEATURED COURSES (NO IMAGES) -->
<section class="py-20 bg-slate-50">
  <div class="max-w-6xl mx-auto px-4">

    <div class="flex items-center justify-between mb-8">
      <h2 class="text-2xl md:text-3xl font-bold">Popular Courses</h2>
      <a href="{% url 'courses:courses' %}" class="text-indigo-600 hover:underline text-sm">View All Courses ‚Üí</a>
    </div>

    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      {% for course in latest_courses %}
      <div class="bg-white rounded-xl shadow p-6 hover:shadow-md transition">

        <div class="flex items-center justify-between">
          <h3 class="font-semibold text-lg">{{ course.title }}</h3>
          <span class="text-xs px-2 py-1 rounded-full bg-indigo-600 text-white">
            {{ course.get_level_display }}
          </span>
        </div>

        <p class="text-sm text-slate-600 mt-3">
          {{ course.description|truncatewords:18 }}
        </p>

        <div class="mt-4 flex items-center justify-between text-sm text-slate-600">
          <span>‚è± {{ course.duration_weeks }} weeks</span>
          <span class="text-slate-800 font-semibold">‚Çπ{{ course.price }}</span>
        </div>

        <div class="mt-5">
          {% if user.is_authenticated %}
            {% if enrolled_ids and course.id in enrolled_ids %}
              <button class="w-full py-2 bg-gray-100 text-slate-500 rounded" disabled>
                Enrolled
              </button>
            {% else %}
              <a href="{% url 'courses:select_course' course.id %}"
                 class="block w-full text-center py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700">
                Enroll Now
              </a>
            {% endif %}
          {% else %}
            <a href="{% url 'courses:register' %}"
               class="block w-full text-center py-2 rounded bg-indigo-600 text-white hover:bg-indigo-700">
              Enroll Now
            </a>
          {% endif %}
        </div>

      </div>
      {% empty %}
        <p class="text-slate-600">No courses available.</p>
      {% endfor %}
    </div>

  </div>
</section>

<!-- TESTIMONIALS -->
<!-- TESTIMONIALS -->
<section class="py-20">
  <div class="max-w-6xl mx-auto px-4">
    <h2 class="text-2xl md:text-3xl font-bold mb-6">What Our Students Say</h2>

    {% if testimonials %}
    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">

      {% for fb in testimonials %}
      <div class="bg-white p-6 rounded-xl shadow hover:shadow-md transition">

        <!-- Avatar -->
        <div class="flex items-center gap-3 mb-3">
          <div class="h-12 w-12 rounded-full bg-slate-200 flex items-center justify-center text-lg font-bold">
            {{ fb.student.full_name|slice:":1"|upper }}
          </div>
          <div>
            <div class="font-semibold">{{ fb.student.full_name }}</div>
            <div class="text-sm text-slate-500">
              {{ fb.student.email }}
            </div>
          </div>
        </div>

        <!-- Rating -->
        <div class="text-amber-500 text-lg mb-2">
          {% for i in "12345"|slice:":fb.rating" %}
            ‚òÖ
          {% endfor %}
        </div>

        <p class="text-sm text-slate-600">‚Äú{{ fb.message }}‚Äù</p>

      </div>
      {% endfor %}
    </div>
    {% else %}
      <p class="text-slate-600">No testimonials yet.</p>
    {% endif %}
  </div>
</section>


<!-- CTA -->
<section class="py-16 bg-white">
  <div class="max-w-4xl mx-auto px-4 text-center">
    <h3 class="text-2xl font-semibold mb-2">Ready to Begin?</h3>
    <p class="text-slate-600 mb-6">Join today and start your journey to German fluency.</p>
    <a href="{% url 'courses:register' %}"
       class="inline-block px-8 py-3 rounded bg-indigo-600 text-white hover:bg-indigo-700">
      Register Now
    </a>
  </div>
</section>

{% endblock %}
